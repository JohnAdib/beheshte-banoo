{%extends display.mvc%}
{%block header_def%}{%endblock%}


{%block content_def%}
<div class="center report" data-xhr="center">
 <div class="content">
  <h1>{{global.title}}</h1>
{%if error%}
  <div id="chart-error">{{error}}</div>
{%else%}
{%endif%}
  <div class="ct-chart ct-perfect-fourth"></div>
 
  <div class="black">
   <a href="/date">{%trans "show all"%}</a>
   | <a href="/date/birthdate">{%trans "birthdate"%}</a>
   | <a href="/date/province">{%trans "province"%}</a>
   | <a href="/date/gender">{%trans "gender"%}</a>
   | <a href="/date/booth">{%trans "booth"%}</a>
  </div>
 </div>
</div>
{%endblock%}






 
{%block foot_js%}
{%if chart_labels%}





 <script type="text/javascript">

  var data = 
  {
   labels: [ {%for date in chart_labels%}'{{date|date("m/d")}}', {%endfor%} ],
   series:
   [
{%for name, datarow in chart_series%}
    {
      name: '{{name}}',
      data: [ {%for value in datarow%}'{{value}}',{%endfor%} ],
    },
{%endfor%}
   ]

  };
  new Chartist.Line('.ct-chart', data, 
    {
      low: 0, showArea: true, {%if error%}fullWidth:false{%else%}fullWidth:true{%endif%}
    } 
  );




  var $chart = $('.ct-chart');

  var $toolTip = $chart
    .append('<div class="tooltip"></div>')
    .find('.tooltip')
    .hide();

  $chart.on('mouseenter', '.ct-point', function() {
    var $point = $(this),
      value = $point.attr('ct:value'),
      seriesName = $point.parent().attr('ct:series-name');
    $toolTip.html(seriesName + '<br>' + value).show();
  });

  $chart.on('mouseleave', '.ct-point', function() {
    $toolTip.hide();
  });

  $chart.on('mousemove', function(event) {
    $toolTip.css({
      left: (event.offsetX || event.originalEvent.layerX) - $toolTip.width() / 2 - 10,
      top: (event.offsetY || event.originalEvent.layerY) - $toolTip.height() - 40
    });
  });


 </script>
{%endif%}
{%endblock%}